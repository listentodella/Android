# 001_输入系统_框架

标签（空格分隔）： Input

---
一个Android设备会有很多app，如qq、微信；也有一些系统功能，例如开关机，调整音量；同时可能会有多种输入设备，如键盘、tp、外接键鼠等。那么输入设备是如何将这些输入信息发到相应的应用呢？
因此输入系统可分为三部分：
### 读取
* 支持多设备
gpio键盘、红外遥控、usb键鼠、tp
* 支持即插即用
可以随时接入或者拔出
* 支持多语言（映射）
同一键盘、同一按键，可以得到不同的字符
#### 所以应分为linux驱动、app处理
##### 驱动
gpio键盘——>`/dev/input/event0`
红外遥控器——>`/dev/input/event1`
##### app处理
* open/read
`/dev/input/event*`
* 监测
有无数据、设备接入/拔出
* 处理（映射）
### 分发
* 分辨
按键：
systemKey:音量、电源
globalKey:特殊键
userKey:发给app
TP：都需要转换 
virtualKey:
手势:
* 发送
找出当前app
发给它
### 处理
app收到后，处理：
点击：执行某些函数
输入框：启动输入法？直接显示字符？

## 输入系统代码框架

![输入系统框架](%E8%BE%93%E5%85%A5%E7%B3%BB%E7%BB%9F%E6%A1%86%E6%9E%B6.jpg)




